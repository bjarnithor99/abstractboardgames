Players = white, black;
Pieces = WhiteRook(white), BlackKing(black), io3(black);


variable io3HasMoved = 0;

macro Jon(dx, dy) = (dx*2-3, dy*2, empty);
macro Ray(dx,dy) = Jon(20, dy)*(dx, dy, enemy) | (dx, dy, empty)+;

rule demo = Ray(20,3)Jon(7,2);

predicate CanPromote() {
    return (this.y == 6) and (true) or (0);
};

effect Promote() {
    Board[this.x][this.y] = io3;
    io3HasMoved = 1-io3HasMoved;
};


rule WhiteRook = (1,1,empty)*Ray(1,1);
rule BlackKing = (0,1,enemy)+;
rule io3 = Ray(1,0);


BoardSize = 2, 2;
Board = 
    WhiteRook, None,
    BlackKing, None
;